(this["webpackJsonpreact-fox"]=this["webpackJsonpreact-fox"]||[]).push([[0],{61:function(t,e,r){},65:function(t,e,r){"use strict";r.r(e);var n=r(3),i=r(2),c=r.n(i),o=r(21),a=r.n(o),s=r(8),j=r(6);r(61);function u(){return Object(n.jsxs)("mesh",{visible:!0,position:[0,0,0],rotation:[0,0,0],children:[Object(n.jsx)("sphereGeometry",{attach:"geometry",args:[1,16,16]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",transparent:!0,opacity:.6,roughness:1,metalness:0})]})}function l(){var t=Object(i.useRef)();return Object(s.b)((function(){t.current.position.z+=.4})),Object(n.jsxs)("mesh",{visible:!0,position:[0,-50,0],rotation:[-Math.PI/2,0,0],ref:t,children:[Object(n.jsx)("planeBufferGeometry",{attach:"geometry",args:[5e3,5e3,128,128]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:1,metalness:0,wireframe:!0})]})}var b=r(5),x=Object(j.atom)({key:"shipPosition",default:{position:{},rotation:{}}}),O=Object(j.atom)({key:"enemyPosition",default:[{x:-10,y:10,z:-80},{x:20,y:0,z:-100}]}),h=Object(j.atom)({key:"laserPositions",default:[]}),f=Object(j.atom)({key:"score",default:0}),m=r(31);function y(){var t=Object(i.useRef)(),e=Object(j.useRecoilState)(x),r=Object(b.a)(e,2),c=r[0],o=r[1];Object(s.b)((function(t){var e=t.mouse;o({position:{x:6*e.x,y:2*e.y},rotation:{z:.5*-e.x,x:.5*-e.x,y:.2*-e.y}})})),Object(s.b)((function(){t.current.rotation.z=c.rotation.z,t.current.rotation.y=c.rotation.x,t.current.rotation.x=c.rotation.y,t.current.position.y=c.position.y,t.current.position.x=c.position.x}));var a=Object(s.c)(m.a,"models/arwing.glb").nodes;console.log(a);var u=a.Default.geometry;return Object(n.jsx)("group",{ref:t,children:Object(n.jsx)("mesh",{visible:!0,geometry:u,children:Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",roughness:.3,metalness:.3})})})}var d=r(0);function p(){var t=Object(i.useRef)(),e=Object(i.useRef)(),r=(new d.TextureLoader).load("target.png");return Object(s.b)((function(r){var n=r.mouse;t.current.position.y=10*-n.y,t.current.position.x=30*-n.x,e.current.position.y=20*-n.y,e.current.position.x=60*-n.x})),Object(n.jsxs)("group",{children:[Object(n.jsx)("sprite",{position:[0,0,-8],ref:t,children:Object(n.jsx)("spriteMaterial",{attach:"material",map:r})}),Object(n.jsx)("sprite",{position:[0,0,-16],ref:e,children:Object(n.jsx)("spriteMaterial",{attach:"material",map:r})})]})}function g(){var t=Object(j.useRecoilValue)(O);return Object(n.jsx)("group",{children:t.map((function(t){return Object(n.jsxs)("mesh",{position:[t.x,t.y,t.z],children:[Object(n.jsx)("sphereBufferGeometry",{attach:"geometry",args:[2,8,8]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"white",wireframe:!0})]},"".concat(t.x))}))})}var v=r(7);function z(){var t=Object(j.useRecoilValue)(x),e=Object(j.useRecoilState)(h),r=Object(b.a)(e,2),i=r[0],c=r[1];return Object(n.jsxs)("mesh",{position:[0,0,-8],onClick:function(){return c([].concat(Object(v.a)(i),[{id:Math.random(),x:0,y:0,z:0,velocity:[6*t.rotation.x,5*t.rotation.y]}]))},children:[Object(n.jsx)("planeBufferGeometry",{attach:"geometry",args:[100,100]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",color:"orange",emissive:"#ff0860",visible:!1})]})}function R(){var t=Object(j.useRecoilValue)(h);return Object(n.jsx)("group",{children:t.map((function(t){return Object(n.jsxs)("mesh",{position:[t.x,t.y,t.z],children:[Object(n.jsx)("boxBufferGeometry",{attach:"geometry",args:[1,1,1]}),Object(n.jsx)("meshStandardMaterial",{attach:"material",emissive:"white",wireframe:!0})]},"".concat(t.id))}))})}function S(){var t=Object(j.useRecoilState)(O),e=Object(b.a)(t,2),r=e[0],n=e[1],i=Object(j.useRecoilState)(h),c=Object(b.a)(i,2),o=c[0],a=c[1],u=Object(j.useRecoilState)(f),l=Object(b.a)(u,2),x=l[0],m=l[1];return Object(s.b)((function(t){t.mouse;var e=r?r.map((function(t){return o.filter((function(e){return o.filter((function(e){return function(t,e){var r=e.x-t.x,n=e.y-t.y,i=e.z-t.z;return Math.sqrt(r*r+n*n+i*i)}(e,t)<3})).length>0})).length>0})):[];e.includes(!0)&&r.length>0&&(m(x+e.filter((function(t){return t})).length),console.log("hit detected")),n(r.map((function(t){return{x:t.x,y:t.y,z:t.z+.1}})).filter((function(t,r){return!e[r]&&t.z<0}))),a(o.map((function(t){return{id:t.id,x:t.x+t.velocity[0],y:t.y+t.velocity[1],z:t.z-1,velocity:t.velocity}})).filter((function(t){return t.z>-100&&t.y>-50})))})),null}function w(){return Object(n.jsx)(s.a,{style:{background:"black"},children:Object(n.jsxs)(j.RecoilRoot,{children:[Object(n.jsx)("directionalLight",{intensity:1}),Object(n.jsx)("ambientLight",{intensity:.1}),Object(n.jsx)(l,{}),Object(n.jsx)(i.Suspense,{fallback:Object(n.jsx)(u,{}),children:Object(n.jsx)(y,{})}),Object(n.jsx)(p,{}),Object(n.jsx)(g,{}),Object(n.jsx)(R,{}),Object(n.jsx)(z,{}),Object(n.jsx)(S,{})]})})}var M=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,66)).then((function(e){var r=e.getCLS,n=e.getFID,i=e.getFCP,c=e.getLCP,o=e.getTTFB;r(t),n(t),i(t),c(t),o(t)}))};a.a.render(Object(n.jsx)(c.a.StrictMode,{children:Object(n.jsx)(w,{})}),document.getElementById("root")),M()}},[[65,1,2]]]);
//# sourceMappingURL=main.0c7f9ca7.chunk.js.map